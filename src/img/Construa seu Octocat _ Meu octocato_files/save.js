!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){!function(){"use strict";if(document.getElementById("save")){var e=document.getElementById("save"),t=document.getElementById("download-octocat"),n=document.getElementById("twitter-submit"),o=document.getElementById("email-trigger"),a=document.getElementById("print-trigger"),r=document.getElementById("email-submit"),s=document.getElementById("octocat"),i=document.getElementById("export-modal"),c=document.getElementById("whiskers").innerHTML,l="";e.onclick=function(){!function(){if(s.classList.contains("hide-ears")&&s.querySelector("#ears")&&(l=s.querySelector("#ears").innerHTML,s.querySelector("#ears").innerHTML="",i.classList.add("add-ears")),s.classList.contains("no-big-hair")){for(var e=s.querySelectorAll("g.big-hair"),t=0;t<e.length;t++)e[t].innerHTML="","none"==getComputedStyle(e[t],null).display&&(e[t].innerHTML="");var n=s.querySelectorAll("g.hair #Original");for(t=0;t<n.length;t++)"none"==getComputedStyle(n[t],null).display&&(n[t].innerHTML="")}s.classList.contains("no-medium-hair")&&s.querySelector("g.medium-hair")&&(s.querySelector("g.medium-hair").innerHTML=""),s.classList.contains("no-hair")&&(document.getElementById("hair-back-holder").innerHTML="",document.getElementById("hair-holder").innerHTML="",document.getElementById("hair-front-holder").innerHTML=""),s.classList.contains("no-back-facialhair")&&(document.getElementById("faceHair-back-holder").innerHTML=""),s.classList.contains("no-pants")&&(document.getElementById("bottoms-holder").innerHTML="",document.getElementById("bottoms-front-holder").innerHTML=""),s.classList.contains("no-xl-pants")&&s.querySelector("g.xl-pants")&&(s.querySelector("g.xl-pants").innerHTML=""),s.classList.contains("no-xxl-pants")&&s.querySelector("g.xxl-pants")&&(s.querySelector("g.xxl-pants").innerHTML=""),s.classList.contains("no-big-collars")&&s.querySelector("g.big-collar")&&(s.querySelector("g.big-collar").innerHTML=""),s.classList.contains("hide-whiskers")&&(document.getElementById("whiskers").innerHTML=""),s.classList.contains("hide-low-facehair")&&(document.getElementById("faceHair-low-holder").innerHTML="")}(),i.classList.add("is-active"),document.body.classList.add("modal-is-active"),v("#artboard",h,!1,!0,!1)},"true"===localStorage.getItem("octocatTerms")&&(document.getElementById("terms").checked=!0,r.removeAttribute("disabled"),n.removeAttribute("disabled"),o.removeAttribute("disabled"),localStorage.setItem("octocatTerms","true"),t&&t.removeAttribute("disabled"),a&&a.removeAttribute("disabled")),console.log(localStorage.getItem("octocatTerms")),document.getElementById("terms").onclick=function(){this.checked?(r.removeAttribute("disabled"),n.removeAttribute("disabled"),o.removeAttribute("disabled"),localStorage.setItem("octocatTerms","true"),t&&t.removeAttribute("disabled"),a&&a.removeAttribute("disabled")):(r.setAttribute("disabled",""),n.setAttribute("disabled",""),o.setAttribute("disabled",""),localStorage.setItem("octocatTerms","false"),t&&t.setAttribute("disabled",""),a&&a.setAttribute("disabled",""))},i.querySelector(".screen").onclick=function(){i.classList="modal-wrap",document.body.classList.remove("modal-is-active")};for(var d=i.querySelectorAll(".keep-editing"),m=0;m<d.length;m++)d[m].onclick=function(e){e.preventDefault(),i.classList.contains("add-ears")&&(s.querySelector("#ears").innerHTML=l),i.classList="modal-wrap",document.body.classList.remove("modal-is-active"),s.classList.contains("hide-whiskers")&&(document.getElementById("whiskers").innerHTML=c)};i.querySelector(".back-to-options").onclick=function(e){e.preventDefault(),i.classList.remove("error")};var u=document.getElementById("load-svg-mask");t&&(t.onclick=function(e){e.preventDefault(),v("#artboard",w,!0,!1,!1),setTimeout((function(){i.classList.remove("posting"),i.classList.remove("completed")}),1e3)});var g,p=document.getElementById("email-octocat"),f=document.getElementById("print-octocat");function v(e,t,n,o,a){[].forEach.call(document.querySelectorAll(e),(function(e){try{var a,r=document.getElementById("img"),s=document.getElementById("octocat"),i=document.getElementById("canvas"),c=i.getContext("2d");i.setAttribute("width",2e3),i.setAttribute("height",2e3),r.src=E(s);var l=r.src;(a=new Image).width=2e3,a.height=2e3;var d="octocat-"+Date.now();a.onload=function(){if(c.fillStyle="rgba(255, 255, 0, 0)",c.fillRect(0,0,canvas.width,canvas.height),c.drawImage(a,0,0,2e3,2e3),n){r.src=i.toDataURL();var e=document.createElement("a");e.download=d+".png",e.href=r.src,document.body.appendChild(e),e.click()}l=(new XMLSerializer).serializeToString(document.getElementById("octocat"));var m=window.btoa(l);r.src=i.toDataURL();var u=r.src;u=r.src.split("data:image/png;base64,").pop(),document.getElementById("twitter-image").value=u,document.getElementById("form-image").value=u,f&&(document.getElementById("print-form-image").value=u,document.getElementById("print-form-svg").value=m),t(),document.getElementById("tweetPreviewImg").src=E(s),o&&(document.getElementById("swag-sticker").src=E(s),document.getElementById("swag-shirt").src=E(s),document.getElementById("swag-mug").src=E(s))},a.src=s?E(s):e.getAttribute("data-svgSource")}catch(e){console.log(e)}}))}function y(){document.getElementById("share-on-twitter");var e=document.getElementById("twitter-image").value;TweenMax.to(u,10,{scaleY:.3,transformOrigin:"top center",ease:Power4.easeOut}).delay(.4),i.classList.add("posting");window.fetch("https://octocat-generator.herokuapp.com/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify({media_id:e})}).then(e=>e.json()).then(t=>{var n=t.success.oauth_token,o="https://twitter.com/oauth/authenticate?oauth_token="+n,a=window.location.origin+"/close";g.location.href=o;var r=setInterval((function(){g.postMessage("Checking for tokens...",a)}),2e3);window.addEventListener("message",(function(o){var a,s;o.data[0]===n?(clearInterval(r),g.close(),a=o.data[0],s=o.data[1],console.log("Preview Tweet"),i.classList.add("previewing"),document.getElementById("tweet").onclick=function(n){n.preventDefault();var o=document.getElementById("tweet-text").value;!function(n,o,a){i.classList.remove("previewing"),window.fetch("https://octocat-generator.herokuapp.com/tweet",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify({oauth_token:n,oauth_token_secret:t.success.oauth_token_secret,oauth_verifier:o,media_id:e,tweetText:a})}).then(e=>e.json()).then(e=>{!0===e.success?(TweenMax.to(u,2,{scaleY:0,transformOrigin:"top center",ease:Power0.easeNone}).delay(1.4),setTimeout((function(){i.classList.remove("posting"),i.classList.add("completed"),L(!1),TweenMax.to(u,1,{scaleY:1}).delay(1),e.url,e.params}),2300)):setTimeout((function(){console.log(e),i.classList.remove("posting"),i.classList.add("error")}),4300)})}(a,s,o)}):(clearInterval(r),g.close(),i.classList.remove("posting"),i.classList.add("error"))}),!1)})}function h(){}function L(e){0!=e&&(e=!0);document.getElementById("email-octocat");var t=document.getElementById("form-email"),n=document.getElementById("form-image").value;if(e&&""==t.value)t.classList.add("form-error");else{TweenMax.to(u,4,{scaleY:.3,transformOrigin:"top center",ease:Power4.easeOut}).delay(.4),i.classList.add("posting"),t.classList.remove("form-error");fetch("https://octocat-generator.herokuapp.com/",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify({image:n,email:t.value})}).then(e=>e.json()).then(t=>{!0===t.success?(TweenMax.to(u,2,{scaleY:0,transformOrigin:"top center",ease:Power0.easeNone}).delay(1.4),setTimeout((function(){i.classList.remove("posting"),i.classList.add("completed"),TweenMax.to(u,1,{scaleY:1}).delay(1);var n=t.url,o=t.params;e&&I(n,o)}),2300)):setTimeout((function(){console.log("There was an issue: "+t.msg),i.classList.remove("posting"),i.classList.add("error")}),4300)})}}function b(e){document.getElementById("print-form-order-id").value=function(e){for(var t="",n="ABCD0123456789".length,o=0;o<e;o++)t+="ABCD0123456789".charAt(Math.floor(Math.random()*n));return t}(6);document.getElementById("print-octocat");var t=document.getElementById("print-form-email"),n=document.getElementById("print-form-name"),o=document.getElementById("print-form-name-last"),a=document.getElementById("print-form-image").value,r=document.getElementById("print-form-svg").value,s=document.getElementById("print-form-order-id").value,c=document.getElementById("print-form-address1"),l=document.getElementById("print-form-address2"),d=document.getElementById("print-form-state"),m=document.getElementById("print-form-city"),g=document.getElementById("print-form-zip"),p=document.getElementById("print-form-country"),f=document.getElementById("print-form-phone"),v=!0;if(""==n.value&&(n.classList.add("form-error"),v=!1),""==o.value&&(o.classList.add("form-error"),v=!1),""==c.value&&(c.classList.add("form-error"),v=!1),""==d.value&&(d.classList.add("form-error"),v=!1),""==m.value&&(m.classList.add("form-error"),v=!1),""==g.value&&(g.classList.add("form-error"),v=!1),""==p.value&&(p.classList.add("form-error"),v=!1),""==t.value&&(t.classList.add("form-error"),v=!1),""==f.value&&(f.classList.add("form-error"),v=!1),0!=v){var y=n.value.replace(/\s/g,""),h=o.value.replace(/\s/g,"");TweenMax.to(u,4,{scaleY:.3,transformOrigin:"top center",ease:Power4.easeOut}).delay(.4),i.classList.add("posting"),t.classList.remove("form-error");fetch("https://octocat-generator.herokuapp.com/",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify({image:a,email:t.value,orderId:s})}).then(e=>e.json()).then(e=>{if(!0===e.success&&!0===e.forPrint){fetch("https://octocat-generator.herokuapp.com/svg",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-type":"application/json"},body:JSON.stringify({svgimage:r,image:e.imgUrl,email:t.value,firstName:y,lastName:h,address1:c.value,address2:l.value,stateProv:d.value,city:m.value,zipPostal:g.value,country:p.value,phone:f.value,orderId:s})}).then(e=>e.json()).then(e=>{!0===e.success?(TweenMax.to(u,2,{scaleY:0,transformOrigin:"top center",ease:Power0.easeNone}).delay(1.4),setTimeout((function(){i.classList.remove("posting"),i.classList.add("completed"),TweenMax.to(u,1,{scaleY:1}).delay(1),I(e.url,e.params)}),2300)):(console.log("There was an issue with SVG submit: "+e.success),console.log("Error msg: "+e.msg),setTimeout((function(){console.log("There was an issue: "+e.success),i.classList.remove("posting"),i.classList.add("error")}),4300))})}else console.log("There was an issue with init submit: "+e.success),setTimeout((function(){console.log("There was an issue: "+e.success),i.classList.remove("posting"),i.classList.add("error")}),4300)})}}function w(){}function I(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4==n.readyState&&n.status},n.send(t)}function E(e){var t=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml,"+encodeURIComponent(t)}o&&(o.onclick=function(e){e.preventDefault(),document.getElementById("email-octocat").classList.toggle("is-active"),f&&f.classList.remove("is-active")}),a&&(a.onclick=function(e){e.preventDefault(),f.classList.toggle("is-active"),p.classList.remove("is-active")}),document.getElementById("print-email-submit")&&(document.getElementById("print-email-submit").onclick=function(e){e.preventDefault(),v("#artboard",b,!1,!0,!1)}),r.onclick=function(e){e.preventDefault(),v("#artboard",L,!1,!1,!0)},n.onclick=function(e){e.preventDefault(),g=window.open("","_blank","width=400,height=400,status=yes,menubar=no,titlebar=no,toolbar=no,location=no"),v("#artboard",y,!1,!1,!1)}}var B=document.getElementById("tweet-text"),T=document.getElementById("tweet-text-count"),S=function(e){var t=B.value.length;T.innerHTML=t};S(),B.addEventListener("keydown",S,!1),B.addEventListener("keyup",S,!1),B.addEventListener("change",S,!1)}()}]);